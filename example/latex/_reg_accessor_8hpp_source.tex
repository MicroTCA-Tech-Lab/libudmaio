\hypertarget{_reg_accessor_8hpp_source}{}\doxysection{Reg\+Accessor.\+hpp}
\label{_reg_accessor_8hpp_source}\index{RegAccessor.hpp@{RegAccessor.hpp}}
\mbox{\hyperlink{_reg_accessor_8hpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{preprocessor}{\#pragma once}}
\DoxyCodeLine{2 }
\DoxyCodeLine{3 \textcolor{preprocessor}{\#include <cstdint>}}
\DoxyCodeLine{4 }
\DoxyCodeLine{5 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_uio_if_8hpp}{udmaio/UioIf.hpp}}"{}}}
\DoxyCodeLine{6 }
\DoxyCodeLine{7 \textcolor{preprocessor}{\#ifndef REG\_PACKED\_ALIGNED}}
\DoxyCodeLine{8 \textcolor{preprocessor}{\#define REG\_PACKED\_ALIGNED \_\_attribute\_\_((packed, aligned(4)))}}
\DoxyCodeLine{9 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{10 }
\DoxyCodeLine{11 \textcolor{keyword}{namespace }\mbox{\hyperlink{namespaceudmaio}{udmaio}} \{}
\DoxyCodeLine{12 }
\DoxyCodeLine{17 \textcolor{keyword}{template} <\textcolor{keyword}{typename} C>}
\DoxyCodeLine{18 \textcolor{keyword}{class }\mbox{\hyperlink{classudmaio_1_1_reg_accessor_base}{RegAccessorBase}} \{}
\DoxyCodeLine{19     \textcolor{keyword}{static\_assert}((\textcolor{keyword}{sizeof}(C) \% \textcolor{keyword}{sizeof}(uint32\_t)) == 0,}
\DoxyCodeLine{20                   \textcolor{stringliteral}{"{}Register size must be a aligned to 32 bits"{}});}
\DoxyCodeLine{21 }
\DoxyCodeLine{22   \textcolor{keyword}{protected}:}
\DoxyCodeLine{23     \mbox{\hyperlink{classudmaio_1_1_uio_if}{UioIf}}* \mbox{\hyperlink{classudmaio_1_1_reg_accessor_base_a4067a4efbfab68504bf00063b389eb93}{\_if}};}
\DoxyCodeLine{24 }
\DoxyCodeLine{25   \textcolor{keyword}{public}:}
\DoxyCodeLine{26     \textcolor{keyword}{using }\mbox{\hyperlink{classudmaio_1_1_uio_if}{constructor\_arg\_type}} = \mbox{\hyperlink{classudmaio_1_1_uio_if}{UioIf}}*;}
\DoxyCodeLine{27 }
\DoxyCodeLine{28     \mbox{\hyperlink{classudmaio_1_1_reg_accessor_base_ad878857665ec6cb11fb5133240a23e65}{RegAccessorBase}}() = \textcolor{keyword}{delete};}
\DoxyCodeLine{29 }
\DoxyCodeLine{34     \mbox{\hyperlink{classudmaio_1_1_reg_accessor_base_a7298226a53b233dd99ca2dec3e41d109}{RegAccessorBase}}(\mbox{\hyperlink{classudmaio_1_1_uio_if}{constructor\_arg\_type}} interface) : \mbox{\hyperlink{classudmaio_1_1_reg_accessor_base_a4067a4efbfab68504bf00063b389eb93}{\_if}}\{interface\} \{\}}
\DoxyCodeLine{35 }
\DoxyCodeLine{41     C \mbox{\hyperlink{classudmaio_1_1_reg_accessor_base_ac48b43f437837cd965706d4c7626b2b9}{\_rd}}(uint32\_t offs)\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} \mbox{\hyperlink{classudmaio_1_1_reg_accessor_base_a4067a4efbfab68504bf00063b389eb93}{\_if}}-\/>template \_rd\_reg<C>(offs); \}}
\DoxyCodeLine{42 }
\DoxyCodeLine{48     \textcolor{keywordtype}{void} \mbox{\hyperlink{classudmaio_1_1_reg_accessor_base_a7107c7f25cb16b638ae56903c7803837}{\_wr}}(uint32\_t offs, \textcolor{keyword}{const} C\& value) \{ \mbox{\hyperlink{classudmaio_1_1_reg_accessor_base_a4067a4efbfab68504bf00063b389eb93}{\_if}}-\/>template \_wr\_reg<C>(offs, value); \}}
\DoxyCodeLine{49 \};}
\DoxyCodeLine{50 }
\DoxyCodeLine{55 \textcolor{keyword}{template} <\textcolor{keyword}{typename} C>}
\DoxyCodeLine{56 \textcolor{keyword}{class }\mbox{\hyperlink{classudmaio_1_1_reg_accessor_array_element}{RegAccessorArrayElement}} : \textcolor{keyword}{public} \mbox{\hyperlink{classudmaio_1_1_reg_accessor_base}{RegAccessorBase}}<C> \{}
\DoxyCodeLine{57     \textcolor{keyword}{static\_assert}((\textcolor{keyword}{sizeof}(C) \% \textcolor{keyword}{sizeof}(uint32\_t)) == 0, \textcolor{stringliteral}{"{}Register size must be aligned to 32 bits"{}});}
\DoxyCodeLine{58 }
\DoxyCodeLine{59     \textcolor{keyword}{const} uint32\_t \mbox{\hyperlink{classudmaio_1_1_reg_accessor_array_element_a03956a268d070b2be79f9c1dd4173ce5}{\_reg\_offs}};}
\DoxyCodeLine{60 }
\DoxyCodeLine{61   \textcolor{keyword}{public}:}
\DoxyCodeLine{67     \mbox{\hyperlink{classudmaio_1_1_reg_accessor_array_element_aaa4e2dac359c1b0ed94316ca5a24727b}{RegAccessorArrayElement}}(\textcolor{keyword}{typename} \mbox{\hyperlink{classudmaio_1_1_uio_if}{RegAccessorBase<C>::constructor\_arg\_type}} c, uint32\_t reg\_offs)}
\DoxyCodeLine{68         : \mbox{\hyperlink{classudmaio_1_1_reg_accessor_base}{RegAccessorBase}}<C>\{c\}, \mbox{\hyperlink{classudmaio_1_1_reg_accessor_array_element_a03956a268d070b2be79f9c1dd4173ce5}{\_reg\_offs}}\{reg\_offs\} \{\}}
\DoxyCodeLine{69 }
\DoxyCodeLine{74     C \mbox{\hyperlink{classudmaio_1_1_reg_accessor_array_element_ae54bc577dd3b1006870b046116278d96}{rd}}()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} \mbox{\hyperlink{classudmaio_1_1_reg_accessor_base_ac48b43f437837cd965706d4c7626b2b9}{RegAccessorBase<C>::\_rd}}(\mbox{\hyperlink{classudmaio_1_1_reg_accessor_array_element_a03956a268d070b2be79f9c1dd4173ce5}{\_reg\_offs}}); \}}
\DoxyCodeLine{75 }
\DoxyCodeLine{80     \textcolor{keywordtype}{void} \mbox{\hyperlink{classudmaio_1_1_reg_accessor_array_element_adab9bc37d421d67e94015a8a5f0ee9d3}{wr}}(\textcolor{keyword}{const} C\& value) \{ \mbox{\hyperlink{classudmaio_1_1_reg_accessor_base_a7107c7f25cb16b638ae56903c7803837}{RegAccessorBase<C>::\_wr}}(\mbox{\hyperlink{classudmaio_1_1_reg_accessor_array_element_a03956a268d070b2be79f9c1dd4173ce5}{\_reg\_offs}}, value); \}}
\DoxyCodeLine{81 \};}
\DoxyCodeLine{82 }
\DoxyCodeLine{90 \textcolor{keyword}{template} <\textcolor{keyword}{typename} C, u\textcolor{keywordtype}{int}32\_t offset, u\textcolor{keywordtype}{int}32\_t arr\_size, u\textcolor{keywordtype}{int}32\_t arr\_str\textcolor{keywordtype}{id}e>}
\DoxyCodeLine{91 \textcolor{keyword}{class }\mbox{\hyperlink{classudmaio_1_1_reg_accessor_array}{RegAccessorArray}} : \textcolor{keyword}{public} \mbox{\hyperlink{classudmaio_1_1_reg_accessor_base}{RegAccessorBase}}<C> \{}
\DoxyCodeLine{92     \textcolor{keyword}{static\_assert}((\textcolor{keyword}{sizeof}(C) \% \textcolor{keyword}{sizeof}(uint32\_t)) == 0, \textcolor{stringliteral}{"{}Register size must be aligned to 32 bits"{}});}
\DoxyCodeLine{93     \textcolor{keyword}{static\_assert}((offset \% \textcolor{keyword}{sizeof}(uint32\_t)) == 0,}
\DoxyCodeLine{94                   \textcolor{stringliteral}{"{}Register array offset must be aligned to 32 bits"{}});}
\DoxyCodeLine{95     \textcolor{keyword}{static\_assert}(arr\_size > 0, \textcolor{stringliteral}{"{}Register array size must be non-\/zero"{}});}
\DoxyCodeLine{96     \textcolor{keyword}{static\_assert}((arr\_stride \% \textcolor{keyword}{sizeof}(uint32\_t)) == 0,}
\DoxyCodeLine{97                   \textcolor{stringliteral}{"{}Register array stride must be aligned to 32 bits"{}});}
\DoxyCodeLine{98 }
\DoxyCodeLine{99   \textcolor{keyword}{public}:}
\DoxyCodeLine{100     \textcolor{keyword}{using }\mbox{\hyperlink{classudmaio_1_1_reg_accessor_base}{RegAccessorBase}}<C>\mbox{\hyperlink{classudmaio_1_1_reg_accessor_base_ad878857665ec6cb11fb5133240a23e65}{::RegAccessorBase}};}
\DoxyCodeLine{101 }
\DoxyCodeLine{107     \mbox{\hyperlink{classudmaio_1_1_reg_accessor_array_element}{RegAccessorArrayElement<C>}} \mbox{\hyperlink{classudmaio_1_1_reg_accessor_array_a4b8a2afd9ba4baefa3f4e218bc0dc020}{operator[]}}(uint32\_t idx) \{}
\DoxyCodeLine{108         assert(idx < arr\_size);}
\DoxyCodeLine{109         \textcolor{keyword}{const} uint32\_t reg\_offs = offset + idx * arr\_stride;}
\DoxyCodeLine{110         \textcolor{keywordflow}{return} \mbox{\hyperlink{classudmaio_1_1_reg_accessor_array_element}{RegAccessorArrayElement<C>}}\{\mbox{\hyperlink{classudmaio_1_1_reg_accessor_base}{RegAccessorBase<C>::\_if}}, reg\_offs\};}
\DoxyCodeLine{111     \}}
\DoxyCodeLine{112 }
\DoxyCodeLine{113     \textcolor{keyword}{const} \mbox{\hyperlink{classudmaio_1_1_reg_accessor_array_element}{RegAccessorArrayElement<C>}} \mbox{\hyperlink{classudmaio_1_1_reg_accessor_array_a6a2e8f0262742bcb598bb17eb2dc1c24}{operator[]}}(uint32\_t idx)\textcolor{keyword}{ const }\{}
\DoxyCodeLine{114         assert(idx < arr\_size);}
\DoxyCodeLine{115         \textcolor{keyword}{const} uint32\_t reg\_offs = offset + idx * arr\_stride;}
\DoxyCodeLine{116         \textcolor{keywordflow}{return} \mbox{\hyperlink{classudmaio_1_1_reg_accessor_array_element}{RegAccessorArrayElement<C>}}\{\mbox{\hyperlink{classudmaio_1_1_reg_accessor_base}{RegAccessorBase<C>::\_if}}, reg\_offs\};}
\DoxyCodeLine{117     \}}
\DoxyCodeLine{118 }
\DoxyCodeLine{123     \textcolor{keyword}{constexpr} uint32\_t \mbox{\hyperlink{classudmaio_1_1_reg_accessor_array_a488582212ef79d90b08842feb6ec876b}{size}}() \{ \textcolor{keywordflow}{return} arr\_size; \}}
\DoxyCodeLine{124 \};}
\DoxyCodeLine{125 }
\DoxyCodeLine{131 \textcolor{keyword}{template} <\textcolor{keyword}{typename} C, u\textcolor{keywordtype}{int}32\_t offset>}
\DoxyCodeLine{132 \textcolor{keyword}{class }\mbox{\hyperlink{classudmaio_1_1_reg_accessor_array}{RegAccessorArray}}<C, offset, 0, 0> : \textcolor{keyword}{public} \mbox{\hyperlink{classudmaio_1_1_reg_accessor_base}{RegAccessorBase}}<C> \{}
\DoxyCodeLine{133     \textcolor{keyword}{static\_assert}((\textcolor{keyword}{sizeof}(C) \% \textcolor{keyword}{sizeof}(uint32\_t)) == 0, \textcolor{stringliteral}{"{}Register size must be aligned to 32 bits"{}});}
\DoxyCodeLine{134     \textcolor{keyword}{static\_assert}((offset \% \textcolor{keyword}{sizeof}(uint32\_t)) == 0, \textcolor{stringliteral}{"{}Register offset must be aligned to 32 bits"{}});}
\DoxyCodeLine{135 }
\DoxyCodeLine{136   \textcolor{keyword}{public}:}
\DoxyCodeLine{137     \textcolor{keyword}{using }\mbox{\hyperlink{classudmaio_1_1_reg_accessor_base}{RegAccessorBase}}<C>\mbox{\hyperlink{classudmaio_1_1_reg_accessor_base_ad878857665ec6cb11fb5133240a23e65}{::RegAccessorBase}};}
\DoxyCodeLine{138 }
\DoxyCodeLine{143     C \mbox{\hyperlink{classudmaio_1_1_reg_accessor_array_3_01_c_00_01offset_00_010_00_010_01_4_ab7a42dc9e810b80b4ed294730414ec11}{rd}}()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} \mbox{\hyperlink{classudmaio_1_1_reg_accessor_base_ac48b43f437837cd965706d4c7626b2b9}{RegAccessorBase<C>::\_rd}}(offset); \}}
\DoxyCodeLine{144 }
\DoxyCodeLine{149     \textcolor{keywordtype}{void} \mbox{\hyperlink{classudmaio_1_1_reg_accessor_array_3_01_c_00_01offset_00_010_00_010_01_4_a39bd8f92c5a373086119460ccde63746}{wr}}(\textcolor{keyword}{const} C\& value) \{ \mbox{\hyperlink{classudmaio_1_1_reg_accessor_base_a7107c7f25cb16b638ae56903c7803837}{RegAccessorBase<C>::\_wr}}(offset, value); \}}
\DoxyCodeLine{150 \};}
\DoxyCodeLine{151 }
\DoxyCodeLine{157 \textcolor{keyword}{template} <\textcolor{keyword}{typename} C, u\textcolor{keywordtype}{int}32\_t offset>}
\DoxyCodeLine{158 \textcolor{keyword}{using }\mbox{\hyperlink{classudmaio_1_1_reg_accessor_array_3_01_c_00_01offset_00_010_00_010_01_4}{RegAccessor}} = \mbox{\hyperlink{classudmaio_1_1_reg_accessor_array}{RegAccessorArray<C, offset, 0, 0>}};}
\DoxyCodeLine{159 }
\DoxyCodeLine{167 \textcolor{keyword}{template} <\textcolor{keyword}{typename} T>}
\DoxyCodeLine{168 std::string \mbox{\hyperlink{namespaceudmaio_a5c03c63d910348e26da90a894fc7242e}{field\_to\_str}}(\textcolor{keyword}{const} T\& chararray) \{}
\DoxyCodeLine{169     \textcolor{keywordflow}{return} \{chararray, strnlen(chararray, \textcolor{keyword}{sizeof}(chararray))\};}
\DoxyCodeLine{170 \}}
\DoxyCodeLine{171 }
\DoxyCodeLine{172 \}  \textcolor{comment}{// namespace udmaio}}

\end{DoxyCode}
