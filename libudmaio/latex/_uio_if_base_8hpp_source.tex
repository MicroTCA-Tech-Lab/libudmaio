\hypertarget{_uio_if_base_8hpp_source}{}\doxysection{Uio\+If\+Base.\+hpp}
\label{_uio_if_base_8hpp_source}\index{UioIfBase.hpp@{UioIfBase.hpp}}
\mbox{\hyperlink{_uio_if_base_8hpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\///}}
\DoxyCodeLine{2 \textcolor{comment}{//        \_\_\_\_  \_\_\_\_\_\_\_\_\_\_\_\_\_  \_\_    \_\_  \_\_ \_           \_\_\_\_\_ \_\_\_   \_        //}}
\DoxyCodeLine{3 \textcolor{comment}{//       / \_\_ \(\backslash\)/ \_\_\_\_/ \_\_\_/\(\backslash\) \(\backslash\)/ /   |  \(\backslash\)/  (\_)\_\_ \_ \_ \_\_|\_   \_/ \_\_| /\_\(\backslash\)       //}}
\DoxyCodeLine{4 \textcolor{comment}{//      / / / / \_\_/  \(\backslash\)\_\_ \(\backslash\)  \(\backslash\)  /    | |\(\backslash\)/| | / \_| '\_/ \_ \(\backslash\)| || (\_\_ / \_ \(\backslash\)      //}}
\DoxyCodeLine{5 \textcolor{comment}{//     / /\_/ / /\_\_\_ \_\_\_/ /  / /     |\_|  |\_|\_\(\backslash\)\_\_|\_| \(\backslash\)\_\_\_/|\_| \(\backslash\)\_\_\_/\_/ \(\backslash\)\_\(\backslash\)     //}}
\DoxyCodeLine{6 \textcolor{comment}{//    /\_\_\_\_\_/\_\_\_\_\_//\_\_\_\_/  /\_/      T  E  C  H  N  O  L  O  G  Y   L A B     //}}
\DoxyCodeLine{7 \textcolor{comment}{//                                                                           //}}
\DoxyCodeLine{8 \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\///}}
\DoxyCodeLine{9 }
\DoxyCodeLine{10 \textcolor{comment}{// Copyright (c) 2021 Deutsches Elektronen-\/Synchrotron DESY}}
\DoxyCodeLine{11 }
\DoxyCodeLine{12 \textcolor{preprocessor}{\#pragma once}}
\DoxyCodeLine{13 }
\DoxyCodeLine{14 \textcolor{preprocessor}{\#include <filesystem>}}
\DoxyCodeLine{15 \textcolor{preprocessor}{\#include <fstream>}}
\DoxyCodeLine{16 \textcolor{preprocessor}{\#include <iostream>}}
\DoxyCodeLine{17 \textcolor{preprocessor}{\#include <memory>}}
\DoxyCodeLine{18 \textcolor{preprocessor}{\#include <string\_view>}}
\DoxyCodeLine{19 }
\DoxyCodeLine{20 \textcolor{preprocessor}{\#include <boost/core/noncopyable.hpp>}}
\DoxyCodeLine{21 \textcolor{preprocessor}{\#include <boost/log/core/core.hpp>}}
\DoxyCodeLine{22 \textcolor{preprocessor}{\#include <boost/log/expressions.hpp>}}
\DoxyCodeLine{23 \textcolor{preprocessor}{\#include <boost/log/keywords/severity.hpp>}}
\DoxyCodeLine{24 \textcolor{preprocessor}{\#include <boost/log/sources/logger.hpp>}}
\DoxyCodeLine{25 \textcolor{preprocessor}{\#include <boost/log/trivial.hpp>}}
\DoxyCodeLine{26 \textcolor{preprocessor}{\#include <fcntl.h>}}
\DoxyCodeLine{27 \textcolor{preprocessor}{\#include <sys/mman.h>}}
\DoxyCodeLine{28 \textcolor{preprocessor}{\#include <sys/stat.h>}}
\DoxyCodeLine{29 \textcolor{preprocessor}{\#include <sys/types.h>}}
\DoxyCodeLine{30 \textcolor{preprocessor}{\#include <unistd.h>}}
\DoxyCodeLine{31 }
\DoxyCodeLine{32 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_uio_config_8hpp}{udmaio/UioConfig.hpp}}"{}}}
\DoxyCodeLine{33 \textcolor{preprocessor}{\#include <boost/log/sources/record\_ostream.hpp>}}
\DoxyCodeLine{34 \textcolor{preprocessor}{\#include <boost/log/sources/severity\_logger.hpp>}}
\DoxyCodeLine{35 }
\DoxyCodeLine{36 \textcolor{keyword}{namespace }blt = boost::log::trivial;}
\DoxyCodeLine{37 }
\DoxyCodeLine{38 \textcolor{keyword}{namespace }\mbox{\hyperlink{namespaceudmaio}{udmaio}} \{}
\DoxyCodeLine{39 }
\DoxyCodeLine{41 \textcolor{keyword}{class }\mbox{\hyperlink{classudmaio_1_1_uio_if_base}{UioIfBase}} : \textcolor{keyword}{private} boost::noncopyable \{}
\DoxyCodeLine{42     \textcolor{keyword}{template} <\textcolor{keyword}{typename} C>}
\DoxyCodeLine{43     \textcolor{keyword}{friend} \textcolor{keyword}{class }\mbox{\hyperlink{classudmaio_1_1_reg_accessor_base}{RegAccessorBase}};}
\DoxyCodeLine{44 }
\DoxyCodeLine{45   \textcolor{keyword}{public}:}
\DoxyCodeLine{48     \mbox{\hyperlink{classudmaio_1_1_uio_if_base}{UioIfBase}}(\mbox{\hyperlink{structudmaio_1_1_uio_device_info}{UioDeviceInfo}} dev);}
\DoxyCodeLine{49 }
\DoxyCodeLine{50     \textcolor{keyword}{virtual} \mbox{\hyperlink{classudmaio_1_1_uio_if_base_a01b385d151e19e41594561d108b10de3}{\string~UioIfBase}}();}
\DoxyCodeLine{51 }
\DoxyCodeLine{52   \textcolor{keyword}{protected}:}
\DoxyCodeLine{53     \textcolor{keywordtype}{int} \mbox{\hyperlink{classudmaio_1_1_uio_if_base_aa113b7a18b1849586386e4a92441792f}{\_fd}}, \mbox{\hyperlink{classudmaio_1_1_uio_if_base_aa26e0944f7834ee3e432084bf3f64f7c}{\_fd\_int}};}
\DoxyCodeLine{54     \textcolor{keywordtype}{void}* \mbox{\hyperlink{classudmaio_1_1_uio_if_base_af085ebb3a6eb65d5b97e12c11eb976e0}{\_mem}};}
\DoxyCodeLine{55     \mbox{\hyperlink{structudmaio_1_1_uio_region}{UioRegion}} \mbox{\hyperlink{classudmaio_1_1_uio_if_base_aee06d2ff49df493a8861054ed2d41f42}{\_region}};}
\DoxyCodeLine{56     \textcolor{keyword}{mutable} boost::log::sources::severity\_logger\_mt<blt::severity\_level> \mbox{\hyperlink{classudmaio_1_1_uio_if_base_a5076f78b2e6d1417e56bee0fb5e2d0de}{\_slg}};}
\DoxyCodeLine{57     \textcolor{keywordtype}{bool} \mbox{\hyperlink{classudmaio_1_1_uio_if_base_a46736b2688618710640f162aba687007}{\_skip\_write\_to\_arm\_int}};}
\DoxyCodeLine{58 }
\DoxyCodeLine{59     \textcolor{keyword}{template} <\textcolor{keyword}{typename} T>}
\DoxyCodeLine{60     uint32\_t \mbox{\hyperlink{classudmaio_1_1_uio_if_base_af4c44361fd1a35ff62d5a115098104d6}{reg\_to\_raw}}(T data) \{}
\DoxyCodeLine{61         \textcolor{keyword}{static\_assert}(\textcolor{keyword}{sizeof}(T) == 4, \textcolor{stringliteral}{"{}register must be 32 bit"{}});}
\DoxyCodeLine{62         \textcolor{keywordflow}{return} *\textcolor{keyword}{reinterpret\_cast<}uint32\_t*\textcolor{keyword}{>}(\&data);}
\DoxyCodeLine{63     \}}
\DoxyCodeLine{64 }
\DoxyCodeLine{65     \textcolor{keywordtype}{void} \mbox{\hyperlink{classudmaio_1_1_uio_if_base_a30eb71a35815af73d2efe1425f2a7320}{arm\_interrupt}}();}
\DoxyCodeLine{66     uint32\_t \mbox{\hyperlink{classudmaio_1_1_uio_if_base_a4f856e9923d8cead9dcab50be856f30e}{wait\_for\_interrupt}}();}
\DoxyCodeLine{67 }
\DoxyCodeLine{68     \textcolor{keyword}{virtual} \textcolor{keyword}{const} std::string\_view \mbox{\hyperlink{classudmaio_1_1_uio_if_base_adc4c1d9a03e87af0b9a853bb45c5bd62}{\_log\_name}}() \textcolor{keyword}{const} = 0;}
\DoxyCodeLine{69 }
\DoxyCodeLine{70     \textcolor{keyword}{virtual} \textcolor{keywordtype}{void} \mbox{\hyperlink{classudmaio_1_1_uio_if_base_a272bbb69bedffb0d12165f8b3d975020}{\_rd\_mem}}(uint32\_t offs, \textcolor{keywordtype}{void}* \_\_restrict\_\_ mem, \textcolor{keywordtype}{size\_t} size) \textcolor{keyword}{const} = 0;}
\DoxyCodeLine{71     \textcolor{keyword}{virtual} \textcolor{keywordtype}{void} \mbox{\hyperlink{classudmaio_1_1_uio_if_base_a2101c4e2a099a030ca0a06b11f5915b7}{\_wr\_mem}}(uint32\_t offs, \textcolor{keyword}{const} \textcolor{keywordtype}{void}* \_\_restrict\_\_ mem, \textcolor{keywordtype}{size\_t} size) = 0;}
\DoxyCodeLine{72 }
\DoxyCodeLine{73     \textcolor{keyword}{template} <\textcolor{keyword}{typename} C>}
\DoxyCodeLine{74     C \mbox{\hyperlink{classudmaio_1_1_uio_if_base_a69d4ff72db3ffa3d42cbd85ba57a2657}{\_rd\_reg}}(uint32\_t offs)\textcolor{keyword}{ const }\{}
\DoxyCodeLine{75         C result;}
\DoxyCodeLine{76         \mbox{\hyperlink{classudmaio_1_1_uio_if_base_a272bbb69bedffb0d12165f8b3d975020}{\_rd\_mem}}(offs, \textcolor{keyword}{reinterpret\_cast<}\textcolor{keywordtype}{void}*\textcolor{keyword}{>}(\&result), \textcolor{keyword}{sizeof}(result));}
\DoxyCodeLine{77         \textcolor{keywordflow}{return} result;}
\DoxyCodeLine{78     \}}
\DoxyCodeLine{79 }
\DoxyCodeLine{80     \textcolor{keyword}{template} <\textcolor{keyword}{typename} C>}
\DoxyCodeLine{81     \textcolor{keywordtype}{void} \mbox{\hyperlink{classudmaio_1_1_uio_if_base_a14a796d071b4fd9ce42a5d24823f3520}{\_wr\_reg}}(uint32\_t offs, \textcolor{keyword}{const} C\& value) \{}
\DoxyCodeLine{82         \mbox{\hyperlink{classudmaio_1_1_uio_if_base_a2101c4e2a099a030ca0a06b11f5915b7}{\_wr\_mem}}(offs, \textcolor{keyword}{reinterpret\_cast<}\textcolor{keyword}{const }\textcolor{keywordtype}{void}*\textcolor{keyword}{>}(\&value), \textcolor{keyword}{sizeof}(value));}
\DoxyCodeLine{83     \}}
\DoxyCodeLine{84 \};}
\DoxyCodeLine{85 }
\DoxyCodeLine{86 \}  \textcolor{comment}{// namespace udmaio}}

\end{DoxyCode}
